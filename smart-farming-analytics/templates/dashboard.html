 {% extends 'base.html' %}
 {% block content %}
 <div class="row g-3">
   <div class="col-12 col-md-6 col-lg-3">
     <div class="card metric">
       <div class="card-body">
         <h5 class="card-title">Crop Yield</h5>
         <p class="card-text">Predict yield based on environmental and soil factors.</p>
         <a href="#crop_yield" class="btn btn-success">Predict</a>
       </div>
     </div>
   </div>
   <div class="col-12 col-md-6 col-lg-3">
     <div class="card metric">
       <div class="card-body">
         <h5 class="card-title">Soil Health</h5>
         <p class="card-text">Analyze soil nutrients and receive recommendations.</p>
         <a href="#soil_health" class="btn btn-primary">Analyze</a>
       </div>
     </div>
   </div>
   <div class="col-12 col-md-6 col-lg-3">
     <div class="card metric">
       <div class="card-body">
         <h5 class="card-title">Pest Detection</h5>
         <p class="card-text">Identify pest or disease risk from symptoms or images.</p>
         <a href="#pest_detection" class="btn btn-danger">Detect</a>
       </div>
     </div>
   </div>
   <div class="col-12 col-md-6 col-lg-3">
     <div class="card metric">
       <div class="card-body">
         <h5 class="card-title">Market Price</h5>
         <p class="card-text">Forecast prices and plan sales strategy.</p>
         <a href="#market_price" class="btn btn-warning">Forecast</a>
       </div>
     </div>
   </div>
 </div>

 <hr class="my-4"/>

 <div id="crop_yield" class="my-4">
   <h3>Crop Yield Prediction</h3>
   <form id="cropYieldForm" class="row g-3">
     <div class="col-md-4">
       <label class="form-label">Soil Type</label>
       <select name="soil_type" class="form-select" required>
         <option value="loamy">Loamy</option>
         <option value="sandy">Sandy</option>
         <option value="clay">Clay</option>
         <option value="silt">Silt</option>
       </select>
     </div>
     <div class="col-md-4"><label class="form-label">Temperature (Â°C)</label><input type="number" step="0.1" class="form-control" name="temperature" required></div>
     <div class="col-md-4"><label class="form-label">Humidity (%)</label><input type="number" step="0.1" class="form-control" name="humidity" required></div>
     <div class="col-md-4"><label class="form-label">Rainfall (mm)</label><input type="number" step="0.1" class="form-control" name="rainfall" required></div>
     <div class="col-md-4"><label class="form-label">Fertilizer Amount (kg/ha)</label><input type="number" step="0.1" class="form-control" name="fertilizer_amount" required></div>
     <div class="col-md-4"><label class="form-label">Irrigation Frequency (per week)</label><input type="number" step="1" class="form-control" name="irrigation_frequency" required></div>
     <div class="col-12"><button class="btn btn-success" type="submit">Predict Yield</button></div>
   </form>
   <div id="cropYieldResult" class="mt-3"></div>
   <div id="cropYieldCharts" class="mt-3"></div>
 </div>

 <hr class="my-4"/>

 <div id="soil_health" class="my-4">
   <h3>Soil Health Analysis</h3>
   <form id="soilHealthForm" class="row g-3">
     <div class="col-md-4"><label class="form-label">pH</label><input name="pH" type="number" step="0.1" class="form-control" required></div>
     <div class="col-md-4"><label class="form-label">Nitrogen</label><input name="nitrogen" type="number" step="0.1" class="form-control" required></div>
     <div class="col-md-4"><label class="form-label">Phosphorus</label><input name="phosphorus" type="number" step="0.1" class="form-control" required></div>
     <div class="col-md-4"><label class="form-label">Potassium</label><input name="potassium" type="number" step="0.1" class="form-control" required></div>
     <div class="col-md-4"><label class="form-label">Organic Matter</label><input name="organic_matter" type="number" step="0.1" class="form-control" required></div>
     <div class="col-md-4"><label class="form-label">Moisture</label><input name="moisture" type="number" step="0.1" class="form-control" required></div>
     <div class="col-12"><button class="btn btn-primary" type="submit">Analyze Soil</button></div>
   </form>
   <div id="soilHealthResult" class="mt-3"></div>
   <div id="soilHealthCharts" class="mt-3"></div>
 </div>

 <hr class="my-4"/>

 <div id="pest_detection" class="my-4">
   <h3>Pest Detection</h3>
   <form id="pestDetectionForm" class="row g-3" enctype="multipart/form-data">
     <div class="col-md-4"><label class="form-label">Crop Type</label><input name="crop_type" type="text" class="form-control"></div>
     <div class="col-md-8"><label class="form-label">Symptoms</label><input name="symptoms" type="text" class="form-control" placeholder="e.g., spots, wilting"></div>
     <div class="col-md-6"><label class="form-label">Environmental Conditions</label><input name="environmental_conditions" type="text" class="form-control" placeholder="e.g., humid, rain"></div>
     <div class="col-md-6"><label class="form-label">Leaf Image (optional)</label><input name="image" type="file" accept="image/*" class="form-control"></div>
     <div class="col-12"><button class="btn btn-danger" type="submit">Detect Pest</button></div>
   </form>
   <div id="pestDetectionResult" class="mt-3"></div>
   <div id="pestDetectionCharts" class="mt-3"></div>
 </div>

 <hr class="my-4"/>

 <div id="market_price" class="my-4">
   <h3>Market Price Forecast</h3>
   <form id="marketPriceForm" class="row g-3">
     <div class="col-md-4"><label class="form-label">Crop Type</label><input name="crop_type" type="text" class="form-control" value="wheat"></div>
     <div class="col-md-4"><label class="form-label">Season</label><input name="season" type="text" class="form-control" value="kharif"></div>
     <div class="col-md-4"><label class="form-label">Location</label><input name="location" type="text" class="form-control" value="North"></div>
     <div class="col-12"><label class="form-label">Historical Data (optional JSON)</label><textarea name="historical_data" class="form-control" rows="3" placeholder='[]'></textarea></div>
     <div class="col-12"><button class="btn btn-warning" type="submit">Forecast</button></div>
   </form>
   <div id="marketPriceResult" class="mt-3"></div>
   <div id="marketPriceCharts" class="mt-3"></div>
 </div>
 {% endblock %}
